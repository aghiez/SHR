<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login-SHR Kospin Jasa</title>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.2.0/css/all.css'>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css'><link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="css/main.css">
    </head>
<body>


<div class="container">
	<div class="screen">
		<div class="screen__content">
			<!-- <form class="login" action="" method="post"> -->
				<div class="error-message" id="error-message"></div>
				<div class="login__field">
					<i class="login__icon fas fa-user"></i>
					<input type="text" class="login__input" placeholder="User name / Email" name="username" id="username" required>
				</div>
				<div class="login__field">
					<i class="login__icon fas fa-lock"></i>
					<input type="password" class="login__input" placeholder="Password" name="password" id="password" required>
				</div>
				<button class="button login__submit" name="login" onclick="login()">
					<span class="button__text">Login</span>
					<i class="button__icon fas fa-chevron-right"></i>
				</button>				
			<!-- </form> -->
			<div class="social-login">
				<h3>log in via</h3>
				<div class="social-icons">
					<a href="#" class="social-login__icon fab fa-instagram"></a>
					<a href="#" class="social-login__icon fab fa-facebook"></a>
					<a href="#" class="social-login__icon fab fa-twitter"></a>
				</div>
			</div>
		</div>
		<div class="screen__background">
			<span class="screen__background__shape screen__background__shape4"></span>
			<span class="screen__background__shape screen__background__shape3"></span>		
			<span class="screen__background__shape screen__background__shape2"></span>
			<span class="screen__background__shape screen__background__shape1"></span>
		</div>		
	</div>
</div>

<script>
	async function login(){
		const username = document.getElementById('username').value;
		const password = document.getElementById('password').value;
		const pesanError = document.getElementById('error-message');
		try{
			const response = await fetch('data/users.json');
			const users = await response.json();

			const user = users.find(user => user.username === username && user.password === password);
			if(user){
				localStorage.setItem('loginUser', JSON.stringify(user));

				window.location.href = 'index.html';
			} else{
				pesanError.textContent = 'Salah Username atau password';
				pesanError.style.display = 'block';
			}
		} catch(error){
			pesanError.textContent = 'Ada kesalahan dalam menampilkan data akun user';
			pesanError.style.display = 'block';
		}
	}
</script>
</body>
</html>
